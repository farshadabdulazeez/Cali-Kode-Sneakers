{% extends 'admin_base.html' %}

{% load static %}

{% block content %}

<div class="container-xxl flex-grow-1 container-p-y">
    <h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light">ADMIN /</span> PRODUCT VARIANT</h4>

    <div class="card">
        <div class="table-responsive text-nowrap">
          <table class="table table-hover">
            <div class="mt-3 pr-4 text-end">
                <button class="btn btn-primary me-3" type="submit"><a class="text-white" href="{% url 'admin_add_product_variant' product_id %}"> CREATE NEW PRODUCT VARIANT</a></button>
            </div>
            <thead>
              <tr>
                <th>SL.NO</th>
                <th>ID</th>
                <th>NAME</th>
                <th>IMAGE</th>
                <th>PRICE</th>
                {% comment %} <th>CATEGORY</th> {% endcomment %}
                <th>STOCK</th>
                <th>VARIANT SIZE</th>
                <th>OPERATIONS</th>
                <th>ACTIONS</th>

              </tr>
            </thead>
            <tbody class="table-border-bottom-0">
                
            <tbody>

                {% for i in variants %}
                
                <tr>
                    <th scope="row">{{ forloop.counter }}</th>
                    <td>{{ i.id }}</td>
                    <td>{{ i.product.product_name }}</td>
                    <td>
                        {% if i.product.product_image %}
                        <div style="width: 80px; height: 8  0px;">
                            <img src="{{ i.product.product_image.url }}" alt="Small Image"
                                style="max-width: 100%; max-height: 100%;">
                        </div>
                        {% endif %}
                    </td>
                    <td>{{ i.product.selling_price }}</td>
                    {% comment %} <td>{{ i.category.category_name }}</td> {% endcomment %}
                    <td>{{ i.stock }}</td>
                    <td>{{ i.product_size.size }}</td>
                    <td><a href="{% url 'admin_edit_product_variant' %}" data-bs-toggle="modal"
                      data-bs-target="#exampleModal" data-qwer="{{ i.id }}" data-price="{{ i.product_price }}"
                      data-stock="{{ i.stock }}"><i class="bi bi-pencil-fill  me-4"></i></a>
                      <a href="{% url 'admin_delete_product_variant' i.id %}" class="delete"><i class="bi bi-trash-fill" data-toggle="tooltip" title="Delete"></i></a></td>
                    <td>
                      <form method="post" action="{% url 'admin_available_product_variant' i.id %}">
                      {% csrf_token %}
                      {% if i.is_active %}
                          <button type="submit" class="btn btn-primary">ACTIVE</button>
                      {% else %}
                          <button type="submit" class="btn btn-danger">DISABLE</button> 
                      {% endif %}
                      </form>
                  </td>
                </tr>

                {% endfor %}

            </tbody>
          </table>
        </div>
      </div>
    </div>



<!-- Button trigger modal -->


<!-- Modal -->
{% for i in variants %}
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
  aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form action="{% url 'admin_edit_product_variant' %}" method="post">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title text-dark" id="exampleModalLabel">UPDATE STOCK  </h5>
        </div>
        <div class="modal-body">
          <label for="variantId">Product Name </label>
          <input class = "form-control" type="text" name="name" id="variantId" value="{{ i.product.product_name }}" readonly>
            
          <label for="variantId">Size </label>
          <input class = "form-control" type="text" name="size" id="variantId" value="{{ i.product_size.size }}" > 
  
          <label for="stock">Stock</label>
          <input class = "form-control bg-white text-dark" type="number" name="stock" min="0" id="stock" required>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save changes</button>
          <button type="submit" class="btn btn-danger" data-bs-dismiss="modal">Close</button>
        </div>
      </form>

    </div>
  </div>
</div>

{% endfor %}

<!-- Button trigger modal -->

    

{% endblock content %}